<!DOCTYPE html>
<html>

<head>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

	<link rel="stylesheet" href="../../../styles/shared-styles.css">
	<link rel="stylesheet" href="./business-profile.css">

	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<script src="../../../scripts/networking/business-mutations.js" defer></script>
	<script src="../../../scripts/app.js" defer></script>
    <script src="../../../scripts/helper.js"></script>
    <script src="../../../scripts/networking/webservice.js" defer></script>
    <script src="../../../scripts/router.js" defer></script>
    <script src="../../../scripts/constants.js" defer></script>

	<title>YourLine</title>
</head>

<body>
	<button class="back-button" onclick="window.history.back()">
		< Back</button>
			<div class="title">
				<label class="title1">Your</label>
				<label class="title2">Business</label>
			</div>

			<div class="nav-separator">
				<hr>
			</div>

			<div class="paragraph-details">
				<p>Enter your business details</p>
			</div>

			<form id="signup-form" action="#" method="POST">
				<div class="input-fields">
					<label for="business-name">Business Name:</label>
					<input class="input-field" type="text" id="business-name" name="business-name" required>
					<button type="reset" onclick="document.getElementById('business-name').value=''">Clear</button>
				</div>
				<div class="input-fields">
					<label for="address">Address:</label>
					<input class="input-field" type="text" id="address" name="address" required>
					<button type="reset" onclick="document.getElementById('address').value=''">Clear</button>
				</div>
				<div class="input-fields">
					<label for="phone_number">Phone:</label>
					<input class="input-field" type="text" id="phone_number" name="phone_number" required>
					<button type="reset" onclick="document.getElementById('phone_number').value=''">Clear</button>
				</div>
				<br><br>
				<input class="submit-button" type="submit" value="Submit">
			</form>

			<script>
				const form = document.getElementById('signup-form');

				form.addEventListener('submit', function (event) {
					event.preventDefault();

					// Get input values
					const businessName = document.getElementById('business-name').value;
					const address = document.getElementById('address').value
					const phoneNumber = document.getElementById('phone_number').value

					// Store input values in localStorage
					let userID = localStorage.getItem('user_id')

					console.log(businessName)
					console.log(address)
					console.log(phoneNumber)
					console.log(userID)

					createBusiness(userID, businessName, address, phoneNumber)
						.then(() => {
							console.log("success on the business creation");
							window.location.href = './business-profile-page-industry.html'; 
						})
						.catch(error => {
							console.error("Error creating business:", error);
							// Show an error message to the user
							window.alert("Error creating business. Please try again.");
						});
				});
			</script>
</body>

</html>