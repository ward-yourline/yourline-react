<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../styles/sign-in-styles.css">

    <script src="../../scripts/app.js" defer></script>
    <script src="../../scripts/helper.js"></script>
    <script src="../../scripts/networking/user-queries.js" defer></script>
    <script src="../../scripts/networking/webservice.js" defer></script>
    <script src="../../scripts/router.js" defer></script>
    <script src="../../scripts/constants.js" defer></script>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>YourLine</title>
</head>

<body>
    <div class="login-div">
        <div class="title">
            <img style="width: 500px; padding: 0px; margin: 0px;" src="../../assets/yl_vertical_logo.svg" alt="">
        </div>

        <hr class="nav-separator">
        
        <h3>Sign in</h3>
        <div class="form">
            <div class="input-div">
                <img class="input-images" src="../../assets/person_FILL0_wght400_GRAD0_opsz48.svg" alt="" />
                <input id="email-input" class="user-input" type="email" placeholder="Enter email">
            </div>
            
            <div class="input-div">
                <img class="input-images" src="../../assets/lock_FILL0_wght400_GRAD0_opsz48.svg" alt="" />
                <input id="password-input" class="user-input" type="password" placeholder="Enter password">
            </div>

            <div class="options">
                <div class="remember-me">
                    <input id="remember-me" type="checkbox">
                    <label for="remember-me">Remember me</label>
                </div>

                <div class="forgot-password">
                    <a href="#">Forgot password</a>
                </div>
            </div>

            <button onclick="signInTapped()" class="sign-in-btn">Sign in</button>

            <hr class="rounded">

            <button class="sign-in-google-btn">
                <img width="15px" style="margin-bottom: -1px; margin-right: 8px" alt="Google login"
                    src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/512px-Google_%22G%22_Logo.svg.png" />
                Sign in with Google
            </button>

            <div class="sign-up">
                <a href="../signup/signup.html">New to YourLine? Sign up here </a>
            </div>
        </div>
    </div>

    <script>
        function signInTapped() {
            let email = document.getElementById('email-input').value
            let password = document.getElementById('password-input').value
            let rememberEnabled = document.getElementById('remember-me').checked

            if (email === "") {
                window.alert("Please enter an email");
                return
            }

            if (validateEmail(email) == false) {
                window.alert("Please enter a valid email");
                return
            }

            if (password === "") {
                window.alert("Please enter a valid password (8 charactres min)");
                return
            }

            if (rememberEnabled) {
                // TODO: Save cookie here
                window.alert(`Cookie saved for ${email}`);
                document.cookie = `username=${email}; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/`;
            }

            signIn(email, password)
        }
    </script>
</body>

</html>